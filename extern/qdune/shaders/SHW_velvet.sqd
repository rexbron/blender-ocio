# QDSLC version 0.0.1-alpha
surface SHW_velvet
param uniform float Ka 0.05
param uniform float Kd 0.1
param uniform float edginess 10
param uniform float roughness 0.1
param uniform float Ks 0.1
param uniform float backscatter 0.1
param uniform color sheen 0.25 0.25 0.25
temp varying vector Ln
temp varying vector H
temp varying normal Nf
temp varying float cosine
temp varying vector V
temp varying float sine
temp varying color shiny
temp varying float $1
temp varying vector $2
temp varying vector $3
temp uniform float $4
temp varying float $5
const float $6 0
const float $7 1.57079632679
const float $8 1.0
global Ci Oi Cl I L N P Cs Os
codesegment
	normalize        $3 N
	faceforward1     Nf $3 I
	normalize        $3 I
	negvv            V $3
	movvf            shiny $6
@1
	illuminance2     P Nf $7 @2
	normalize        Ln L
	vdot             $5 Ln V
	maxf             cosine $5 $6
	divfff           $4 $8 roughness
	pow              $5 cosine $4
	mulfff           $5 $5 backscatter
	mulvvf           $3 Cl $5
	maddvvv          shiny $3 sheen
	vdot             $5 Nf V
	maxf             cosine $5 $6
	mulfff           $5 cosine cosine
	subfff           $5 $8 $5
	sqrt             sine $5
	pow              $5 sine edginess
	vdot             $1 Ln Nf
	mulfff           $5 $5 $1
	mulvvf           $3 Cl $5
	maddvvv          shiny $3 sheen
	jmp              @1
@2
	movvv            Oi Os
	ambient          $3
	mulvvf           $3 $3 Ka
	diffuse          $2 Nf
	maddvvf          $3 $2 Kd
	mulvvv           $3 Os $3
	mulvvv           $3 $3 Cs
	addvvv           Ci $3 shiny
	return
