# QDSLC version 0.0.1-alpha
surface ceramictiles
param uniform string projection "st"
param uniform string textureprojspace "shader"
param uniform color Cmottle 0.2 0.2 0.7
param uniform float envrad 100
param uniform float ttilespacing 10
param uniform float mottling 1
param uniform float varylum 0.5
param uniform float raysamples 1
param uniform float roughness 0.1
param uniform color Cedge 0.025 0.025 0.2
param uniform float blur 0
param uniform float speckly 1
param uniform float edgevary 1
param uniform float Ka 1
param uniform float groovedepth 0.2
param uniform color mortarcolor 0.5 0.5 0.5
param uniform float varyhue 0.025
param uniform float Kdtile 0.5
param uniform float Ks 0.75
param uniform string envspace "world"
param uniform string envname ""
param uniform float stilespacing 10
param uniform float specsharpness 0.5
param uniform color Cbase 0.05 0.075 0.6
param uniform float grooveheight 0.06
param uniform float mottlefreq 7
param uniform float Kdmortar 0.8
param uniform float truedisp 0
param uniform color Cspeck 0.015 0.015 0.015
param uniform float Kr 1
param uniform float rayjitter 0
param uniform float eta 1.5
param uniform float groovewidth 0.06
param uniform float varysat 0.4
param uniform float mx[16] 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0 1
temp varying float w_1
temp uniform float i_3
temp varying point noisep_1
temp uniform float i_2
temp varying float fkt
temp varying float fw
temp varying float speckfreq
temp varying float spacescale
temp varying float l
temp varying float fw_2
temp varying float fkr
temp varying float twhichtile
temp varying float stile
temp varying float intile
temp varying float fw_1
temp varying float s_1
temp uniform float i_1
temp varying float specky
temp varying point pp_2
temp varying float dst
temp varying normal Ntile
temp varying float tt
temp varying point Pproj
temp varying vector V
temp varying normal Nf
temp varying color basecolor
temp varying float tileindex
temp varying float x1_1
temp varying float sum_3
temp varying color Cmortar
temp varying float nedge_1
temp varying float x1
temp varying float x0
temp varying vector V_1
temp varying point noisep
temp varying point pp_3
temp varying point pp
temp uniform float amp
temp varying float dtt
temp varying float sum_2
temp varying color C
temp varying float dss
temp varying float kr
temp varying point pp_1
temp varying float dQ
temp uniform float amp_1
temp varying color Ctile
temp varying color Chsl
temp varying float swhichtile
temp varying float edgy
temp varying float nonspec
temp varying float ttile
temp varying float x0_1
temp uniform float amp_2
temp varying color C_1
temp varying float sum_1
temp uniform float i
temp varying float mottle
temp varying float sedgeoffset
temp varying float tedgeoffset
temp varying vector IN
temp varying float fw_3
temp varying float sum
temp varying float nedge
temp varying float w_2
temp varying float h
temp varying float z
temp varying float ks
temp varying float kd
temp varying vector Ndisp
temp varying float tiledisp
temp varying vector V_2
temp varying float ss
temp varying vector H
temp varying point Q
temp uniform float amp_3
temp varying float w
temp varying float $1
temp varying vector $2
temp uniform vector $3
temp varying float $4
temp varying vector $5
temp varying float $6
temp uniform vector $7
temp uniform float $8
temp varying float $9
temp varying vector $10
temp varying vector $11
temp varying float $12
temp uniform vector $13
temp varying float $14
temp varying float $15
temp varying vector $16
temp varying vector $17
temp uniform bool $18
temp varying bool $19
temp uniform float $20
temp varying vector $21
temp uniform vector $22
temp varying float $23
temp varying float $24
temp varying float $25
temp varying float $26
temp uniform vector $27
temp varying float $28
temp uniform float $29
temp uniform float $30
temp uniform float $31
temp uniform float $32
temp uniform float $33
temp varying float $34
temp uniform float $35
temp uniform float $36
temp uniform float $37
temp uniform float $38
temp uniform float $39
temp uniform float $40
temp uniform float $41
temp uniform float $42
temp uniform float $43
temp uniform float $44
temp varying bool $45
temp uniform float $46
temp varying float $47
temp uniform bool $48
temp varying float $49
temp uniform float $50
temp uniform bool $51
temp varying float $52
temp uniform bool $53
temp varying float $54
temp uniform bool $55
temp varying float $56
temp varying float $57
temp varying vector $58
temp uniform vector $59
temp varying vector $60
temp uniform matrix $61
temp varying vector $62
temp varying bool $63
temp varying float $64
const float $65 0
const float $66 1
const float $67 2
const float $68 3
const float $69 4
const float $70 5
const float $71 6
const float $72 7
const float $73 8
const float $74 9
const float $75 10
const float $76 11
const float $77 12
const float $78 13
const float $79 14
const float $80 15
const float $81 0.72
const string $82 "hsl"
const float $83 20
const float $84 0.7
const float $85 0.95
const float $86 0.75
const float $87 0.5
const float $88 0.15
const float $89 37
const float $90 0.2
const string $91 "planar"
const float $92 0.65
const float $93 0.55
const float $94 0.18
const string $95 "__nonspecular"
const string $96 "cylindrical"
const string $97 "st"
const float $98 0.4
const float $99 0.6
const float $100 0.075
const float $101 0.05
const float $102 3.14159265359
const float $103 1.5707963268
const string $104 "perspective"
const float $105 0.85
const string $106 "shader"
const float $107 0.925
const float $108 6.28318530718
const string $109 "spherical"
const float $110 1e-06
const string $111 "rgb"
global Ci Oi Cl I L N P s t dv du Os
codesegment
	movfaff          $33 mx $65
	movfaff          $36 mx $66
	movfaff          $35 mx $67
	movfaff          $30 mx $68
	movfaff          $29 mx $69
	movfaff          $32 mx $70
	movfaff          $31 mx $71
	movfaff          $42 mx $72
	movfaff          $41 mx $73
	movfaff          $44 mx $74
	movfaff          $43 mx $75
	movfaff          $38 mx $76
	movfaff          $37 mx $77
	movfaff          $40 mx $78
	movfaff          $39 mx $79
	movfaff          $50 mx $80
	movmf16          $61 $33 $36 $35 $30 $29 $32 $31 $42 $41 $44 $43 $38 $37 $40 $39 $50
	jness            projection $97 @1
	movvf3           Pproj s t $65
	jmp              @2
@1
	ptransform1      Pproj textureprojspace P
@2
	ptransform3      Pproj $61 Pproj
	ifeqss           $48 projection $91
	oreqss           $48 projection $97
	cjmpnot          $48 @3
	xcomp            ss Pproj
	ycomp            tt Pproj
	Duf              $14 ss
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 ss
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dss $14 $110
	Duf              $14 tt
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 tt
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dtt $14 $110
	jmp              @4
@3
	jness            projection $104 @5
	zcomp            $14 Pproj
	maxf             z $14 $110
	xcomp            $14 Pproj
	divfff           ss $14 z
	ycomp            $14 Pproj
	divfff           tt $14 z
	Duf              $14 ss
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 ss
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dss $14 $110
	Duf              $14 tt
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 tt
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dtt $14 $110
	jmp              @6
@5
	jness            projection $109 @7
	normalize        V Pproj
	xcomp            $14 V
	ycomp            $34 V
	atan2            $14 $34 $14
	negff            $14 $14
	addfff           $14 $14 $102
	divfff           ss $14 $108
	zcomp            $14 V
	acos             $14 $14
	divfff           $14 $14 $102
	subfff           tt $87 $14
	Duf              $14 ss
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 ss
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dss $14 $110
	ifgtff           $45 dss $87
	cond_push        $45
	subfff           $14 $66 dss
	maxf             dss $14 $110
	cond_pop
	Duf              $14 tt
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 tt
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dtt $14 $110
	ifgtff           $45 dtt $87
	cond_push        $45
	subfff           $14 $66 dtt
	maxf             dtt $14 $110
	cond_pop
	jmp              @8
@7
	jness            projection $96 @9
	normalize        V_1 Pproj
	xcomp            $14 V_1
	ycomp            $34 V_1
	atan2            $14 $34 $14
	negff            $14 $14
	addfff           $14 $14 $102
	divfff           ss $14 $108
	zcomp            tt Pproj
	Duf              $14 ss
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 ss
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dss $14 $110
	ifgtff           $45 dss $87
	cond_push        $45
	subfff           $14 $66 dss
	maxf             dss $14 $110
	cond_pop
	Duf              $14 tt
	mulfff           $14 $14 du
	abs              $14 $14
	Dvf              $34 tt
	mulfff           $34 $34 dv
	abs              $34 $34
	addfff           $14 $14 $34
	maxf             dtt $14 $110
@9
@8
@6
@4
	divfff           ss ss stilespacing
	divfff           dss dss stilespacing
	divfff           tt tt ttilespacing
	divfff           dtt dtt ttilespacing
	floor            swhichtile ss
	floor            twhichtile tt
	subfff           stile ss swhichtile
	subfff           ttile tt twhichtile
	divfff           $36 groovewidth $67
	addfff           $14 ss $36
	divfff           w dss $66
	divfff           $34 $14 $66
	divfff           $9 w $67
	subfff           x0 $34 $9
	addfff           x1 x0 w
	divfff           nedge groovewidth $66
	subfff           $34 $66 nedge
	floor            $9 x1
	mulfff           $34 $34 $9
	floor            $9 x1
	subfff           $9 x1 $9
	subfff           $9 $9 nedge
	maxf             $9 $65 $9
	addfff           $34 $34 $9
	subfff           $9 $66 nedge
	floor            $12 x0
	mulfff           $9 $9 $12
	floor            $12 x0
	subfff           $12 x0 $12
	subfff           $12 $12 nedge
	maxf             $12 $65 $12
	addfff           $9 $9 $12
	subfff           $34 $34 $9
	divfff           $34 $34 w
	divfff           $30 grooveheight $67
	addfff           $9 tt $30
	divfff           w_1 dtt $66
	divfff           $12 $9 $66
	divfff           $1 w_1 $67
	subfff           x0_1 $12 $1
	addfff           x1_1 x0_1 w_1
	divfff           nedge_1 grooveheight $66
	subfff           $12 $66 nedge_1
	floor            $1 x1_1
	mulfff           $12 $12 $1
	floor            $1 x1_1
	subfff           $1 x1_1 $1
	subfff           $1 $1 nedge_1
	maxf             $1 $65 $1
	addfff           $12 $12 $1
	subfff           $1 $66 nedge_1
	floor            $6 x0_1
	mulfff           $1 $1 $6
	floor            $6 x0_1
	subfff           $6 x0_1 $6
	subfff           $6 $6 nedge_1
	maxf             $6 $65 $6
	addfff           $1 $1 $6
	subfff           $12 $12 $1
	divfff           $12 $12 w_1
	mulfff           intile $34 $12
	mulfff           $9 $78 twhichtile
	addfff           tileindex swhichtile $9
	smoothstep       $9 $65 $100 stile
	smoothstep       $12 $107 $66 stile
	subfff           tiledisp $9 $12
	smoothstep       $9 $65 $100 ttile
	smoothstep       $12 $107 $66 ttile
	subfff           $9 $9 $12
	mulfff           tiledisp tiledisp $9
	normalize        $11 N
	faceforward1     Nf $11 I
	subfff           $9 tiledisp $66
	mulfff           $9 groovedepth $9
	vtransform1      $62 $106 Nf
	length           spacescale $62
	maxf             $12 spacescale $110
	divfff           $12 $9 $12
	mulvvf           Ndisp Nf $12
	maddvvf          P Ndisp truedisp
	subfff           $29 $66 truedisp
	mulvvf           $62 Ndisp $29
	addvvv           $62 P $62
	calcnormal       $62 $62
	normalize        Ntile $62
	addfff           $12 tileindex $70
	cellnoise1v      $62 $12
	movvf            $22 $87
	subvvv           $10 $62 $22
	maddvvf          Ntile $10 $101
	mixv             $10 Nf Ntile intile
	normalize        Nf $10
	movvv            C Cbase
	maxf             dst dss dtt
	jleff            mottling $65 @11
	movvf3           $10 stile ttile tileindex
	mulvvf           noisep $10 mottlefreq
	maxf             $1 dss dtt
	mulfff           $1 mottlefreq $1
	movff            amp $66
	movvv            pp noisep
	movff            sum $65
	movff            fw $1
	movff            i $65
@13
	ifltff           $51 i $69
	cjmpnot          $51 @14
	noise3f          $6 pp
	mulfff           $6 $67 $6
	subfff           $6 $6 $66
	smoothstep       $26 $90 $86 fw
	subfff           $26 $66 $26
	mulfff           $6 $6 $26
	maddfff          sum amp $6
	mulfff           amp amp $92
	movvf            $59 $67
	mulvvv           pp pp $59
	mulfff           fw fw $67
	addfff           i i $66
	jmp              @13
@14
	movff            $26 sum
	mulfff           $26 $99 $26
	addfff           mottle $90 $26
	mulfff           $26 mottling mottle
	clampf           $26 $26 $65 $66
	mixv             C C Cmottle $26
@11
	jleff            edgevary $65 @15
	mulfff           $26 $75 dst
	mulfff           $54 stile $75
	mulfff           $64 ttile $75
	addfff           $15 tileindex $75
	movvf3           $17 $54 $64 $15
	movff            amp_1 $66
	movvv            pp_1 $17
	movff            sum_1 $65
	movff            fw_1 $26
	movff            i_1 $65
@17
	ifltff           $18 i_1 $67
	cjmpnot          $18 @18
	noise3f          $64 pp_1
	mulfff           $64 $67 $64
	subfff           $64 $64 $66
	smoothstep       $15 $90 $86 fw_1
	subfff           $15 $66 $15
	mulfff           $64 $64 $15
	maddfff          sum_1 amp_1 $64
	mulfff           amp_1 amp_1 $87
	movvf            $27 $67
	mulvvv           pp_1 pp_1 $27
	mulfff           fw_1 fw_1 $67
	addfff           i_1 i_1 $66
	jmp              @17
@18
	movff            $15 sum_1
	mulfff           sedgeoffset $101 $15
	mulfff           $15 $75 dst
	mulfff           $28 stile $75
	mulfff           $56 ttile $75
	subfff           $23 tileindex $68
	movvf3           $16 $28 $56 $23
	movff            amp_2 $66
	movvv            pp_2 $16
	movff            sum_2 $65
	movff            fw_2 $15
	movff            i_2 $65
@19
	ifltff           $55 i_2 $67
	cjmpnot          $55 @20
	noise3f          $56 pp_2
	mulfff           $56 $67 $56
	subfff           $56 $56 $66
	smoothstep       $23 $90 $86 fw_2
	subfff           $23 $66 $23
	mulfff           $56 $56 $23
	maddfff          sum_2 amp_2 $56
	mulfff           amp_2 amp_2 $87
	movvf            $13 $67
	mulvvv           pp_2 pp_2 $13
	mulfff           fw_2 fw_2 $67
	addfff           i_2 i_2 $66
	jmp              @19
@20
	movff            $23 sum_2
	mulfff           tedgeoffset $101 $23
	addfff           $23 stile sedgeoffset
	smoothstep       $25 $101 $88 $23
	smoothstep       $4 $105 $85 $23
	subfff           $25 $25 $4
	addfff           $4 ttile tedgeoffset
	smoothstep       $52 $101 $88 $4
	smoothstep       $49 $105 $85 $4
	subfff           $52 $52 $49
	mulfff           $4 $25 $52
	subfff           edgy $66 $4
	mulfff           $4 edgevary edgy
	mixv             C C Cedge $4
@15
	jleff            speckly $65 @21
	movff            speckfreq $72
	mulfff           $4 stile speckfreq
	mulfff           $52 ttile speckfreq
	addfff           $49 tileindex $73
	movvf3           noisep_1 $4 $52 $49
	noise3f          $4 noisep_1
	mulfff           $4 $67 $4
	subfff           $4 $4 $66
	mulfff           $52 speckfreq dst
	smoothstep       $52 $90 $86 $52
	subfff           $52 $66 $52
	mulfff           specky $4 $52
	smoothstep       specky $93 $84 specky
	mulfff           $4 speckly specky
	mixv             C C Cspeck $4
@21
	movvv            Ctile C
	ctransform1      Chsl $82 Ctile
	compv            h Chsl $65
	compv            s_1 Chsl $66
	compv            l Chsl $67
	addfff           $4 tileindex $68
	cellnoise1f      $4 $4
	subfff           $4 $4 $87
	maddfff          h varyhue $4
	subfff           $4 tileindex $79
	cellnoise1f      $4 $4
	subfff           $4 $4 $87
	mulfff           $4 varysat $4
	subfff           $4 $66 $4
	mulfff           s_1 s_1 $4
	addfff           $4 tileindex $89
	cellnoise1f      $4 $4
	subfff           $4 $4 $87
	mulfff           $4 varylum $4
	subfff           $4 $66 $4
	mulfff           l l $4
	mod              $4 h $66
	clampf           $52 s_1 $65 $66
	clampf           $49 l $65 $66
	movvf3           Chsl $4 $52 $49
	movvf            $7 $66
	movvf            $3 $65
	clampv           $5 Chsl $3 $7
	ctransform2      Ctile $82 $111 $5
	movvv            Cmortar mortarcolor
	movvf3           $5 ss tt $65
	mulvvf           Q $5 $83
	area             $4 Q
	sqrt             $4 $4
	maxf             dQ $4 $110
	ifltff           $63 intile $66
	cond_push        $63
	movff            amp_3 $66
	movvv            pp_3 Q
	movff            sum_3 $65
	movff            fw_3 dQ
	movff            i_3 $65
@23
	ifltff           $53 i_3 $68
	cjmpnot          $53 @24
	noise3f          $4 pp_3
	mulfff           $4 $67 $4
	subfff           $4 $4 $66
	smoothstep       $52 $90 $86 fw_3
	subfff           $52 $66 $52
	mulfff           $4 $4 $52
	maddfff          sum_3 amp_3 $4
	mulfff           amp_3 amp_3 $99
	movvf            $7 $67
	mulvvv           pp_3 pp_3 $7
	mulfff           fw_3 fw_3 $67
	addfff           i_3 i_3 $66
	jmp              @23
@24
	movff            $52 sum_3
	mulfff           $52 $98 $52
	addfff           $52 $87 $52
	smoothstep       $52 $65 $66 $52
	movvf            $21 $52
	mulvvv           Cmortar Cmortar $21
	cond_pop
	mixv             basecolor Cmortar Ctile intile
	mulfff           ks Ks intile
	mixf             kd Kdmortar Kdtile intile
	normalize        IN I
	negvv            V_2 IN
	divfff           $8 $66 eta
	fresnel1         fkr fkt IN Nf $8
	mulfff           $49 fkr Kr
	mulfff           kr $49 intile
	mulvvf           $58 basecolor fkt
	ambient          $60
	mulvvf           $60 $60 Ka
	diffuse          $2 Nf
	maddvvf          $60 $2 kd
	mulvvv           $58 $58 $60
	divfff           $20 roughness $75
	movvf            C_1 $65
	subfff           $46 $66 specsharpness
	mulfff           w_2 $94 $46
@25
	illuminance2     P Nf $103 @26
	movff            nonspec $65
	ifltff           $19 nonspec $66
	cond_push        $19
	normalize        $2 L
	addvvv           $2 $2 V_2
	normalize        H $2
	divfff           $46 $66 $20
	vdot             $24 Nf H
	maxf             $24 $65 $24
	pow              $47 $24 $46
	addfff           $24 $81 w_2
	subfff           $57 $81 w_2
	smoothstep       $47 $57 $24 $47
	mulfff           $47 $66 $47
	maddvvf          C_1 Cl $47
	cond_pop
	jmp              @25
@26
	movvv            $2 C_1
	mulvvf           $2 $2 ks
	addvvv           Ci $58 $2
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
