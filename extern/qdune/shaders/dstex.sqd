# almost same as 'paintedplastic' but with extra specularmap
surface dstex
param uniform float Ka 1
param uniform float Kd 0.5
param uniform float Ks 0.5
param uniform float roughness 0.1
param uniform color specularcolor 1 1 1
param string diffusename ""
param string specularname ""
global N I Ci Cs Oi Os s t
temp color Ct
temp normal Nf
temp vector V
temp color $1
temp vector $2
const string $3 ""
temp float $4
const float $5 1
temp color $6
codesegment
	movvv         Ct Cs
	jeqss         diffusename $3 @1
	texturev      $1 diffusename
	mulvvv        Ct Ct $1
@1
	jeqss         specularname $3 @2
	texturev      $6 specularname
@2
	normalize     $1 N
	faceforward1  Nf $1 I
	normalize     V I
	negvv         V V
	diffuse       $1 Nf
	mulvvf        $1 $1 Kd
	ambient       $2
	maddvvf       $1 $2 Ka
	mulvvv        $1 $1 Ct
	specular      $2 Nf V roughness
	mulvvf        $2 $2 Ks
	mulvvv        $2 $2 specularcolor
	mulvvv        $2 $2 $6
	addvvv        Ci $1 $2
	movvv         Oi Os
	mulvvv        Ci Ci Oi
	return
