# QDSLC version 0.0.1-alpha
surface glossy
param uniform float Ks 0.75
param uniform float Ka 1
param uniform float roughness 0.1
param uniform float specsharpness 0.5
param uniform float Kd 1
temp varying vector V
temp varying color C
temp varying float nonspec
temp varying vector H
temp varying float w
temp varying float $1
temp uniform float $2
temp varying float $3
temp varying float $4
temp uniform float $5
temp varying vector $6
temp varying vector $7
temp varying vector $8
temp varying bool $9
temp varying vector $10
const float $11 0
const float $12 1
const float $13 0.18
const float $14 10
const string $15 "__nonspecular"
const float $16 0.72
const float $17 1.5707963268
global Ci Oi Cl I L N P Cs Os
codesegment
	movvv            Oi Os
	normalize        $10 N
	normalize        $7 I
	negvv            V $7
	ambient          $7
	mulvvf           $7 $7 Ka
	diffuse          $8 $10
	maddvvf          $7 $8 Kd
	mulvvv           $7 Cs $7
	divfff           $5 roughness $14
	movvf            C $11
	subfff           $2 $12 specsharpness
	mulfff           w $13 $2
@1
	illuminance2     P $10 $17 @2
	movff            nonspec $11
	ifltff           $9 nonspec $12
	cond_push        $9
	normalize        $6 L
	addvvv           $6 $6 V
	normalize        H $6
	divfff           $2 $12 $5
	vdot             $4 $10 H
	maxf             $4 $11 $4
	pow              $3 $4 $2
	addfff           $4 $16 w
	subfff           $1 $16 w
	smoothstep       $3 $1 $4 $3
	mulfff           $3 $12 $3
	maddvvf          C Cl $3
	cond_pop
	jmp              @1
@2
	movvv            $6 C
	mulvvf           $6 $6 Ks
	addvvv           $8 $7 $6
	mulvvv           Ci Cs $8
	return
