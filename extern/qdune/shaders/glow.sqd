surface glow
param uniform float attenuation 2
temp float falloff
global I N Ci Cs Oi
temp float $1
temp float $2
const float $3 0
temp bool $4
codesegment
	vdot			falloff I N
	ifltff		$4 falloff $3
	cond_push	$4
	vdot			$1 I I
	vdot			$2 N N
	mulfff		$1 $1 $2
	mulfff		$2 falloff falloff
	divfff		falloff $2 $1
	pow				falloff falloff attenuation
	mulvvf		Ci Cs falloff
	movvf			Oi falloff
	cond_else
	movvf			Oi $3
	return
