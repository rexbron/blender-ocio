# QDSLC version 0.0.1-alpha
surface luna
param uniform float outer_rad 0.05
param uniform float rayfade 1
param uniform float Ka 0.5
param uniform float peak_ht 0.005
param uniform float octaves 8
param uniform float peak_rad 0.0075
param uniform float inner_rad 0.01
param uniform float Kd 1
param uniform float H 0.3
param uniform float rim_rad 0.02
param uniform float maria_color 0.1
param uniform float lacunarity 2
param uniform float highland_threshold -0.2
param uniform float numrays 8
param uniform float highland_altitude 0.001
param uniform float maria_basecolor 0.7
param uniform color highland_color 0.7 0.7 0.7
param uniform float rim_ht 0.003
param uniform float maria_altitude 0.0004
param uniform float arg23 0.3
param uniform float arg22 1
temp uniform float i_2
temp varying float fw
temp varying color Ct
temp varying float filtwidth
temp varying float fw_2
temp varying float temp1
temp varying float pd
temp varying float radial_dist
temp uniform float i_1
temp varying point pp_2
temp varying float sum
temp varying float fw_1
temp varying float chaos
temp varying vector vv
temp uniform float omega
temp varying float raydist
temp varying normal NN
temp varying point PP
temp varying point pp
temp varying float sum_2
temp uniform float amp
temp varying point PQ
temp varying point pp_1
temp uniform float amp_1
temp uniform float amp_2
temp uniform float i
temp varying float sum_1
temp varying float fw_3
temp varying float ht
temp varying float uu
temp varying float lighten
temp varying float $1
temp varying vector $2
temp uniform vector $3
temp varying vector $4
temp uniform vector $5
temp varying vector $6
temp varying vector $7
temp varying float $8
temp varying vector $9
temp varying float $10
temp uniform float $11
temp varying float $12
temp varying float $13
temp uniform float $14
temp varying float $15
temp varying float $16
temp varying float $17
temp varying bool $18
temp varying bool $19
temp uniform bool $20
temp uniform bool $21
temp uniform bool $22
temp varying vector $23
temp varying vector $24
temp uniform vector $25
temp varying bool $26
const float $27 -0.5
const float $28 1
const float $29 1e-06
const float $30 3
const float $31 4
const string $32 "shader"
const float $33 0
const float $34 0.2
const float $35 0.15
const float $36 0.5
const float $37 2
const float $38 0.022
const float $39 20
const float $40 62
const float $41 0.833
const float $42 6
const float $43 0.4
const float $44 5
const float $45 0.0025
const float $46 0.75
global dv Oi I Ci N P u v Cs du Os
codesegment
	movvv            PQ P
	ptransform1      PP $32 P
	area             $16 PP
	sqrt             $16 $16
	maxf             filtwidth $16 $29
	normalize        NN N
	xcomp            $16 PP
	xcomp            $8 PP
	mulfff           $16 $16 $8
	ycomp            $8 PP
	ycomp            $15 PP
	maddfff          $16 $8 $15
	sqrt             radial_dist $16
	subfff           $14 $27 H
	pow              omega lacunarity $14
	movff            amp $28
	movvv            pp PP
	movff            sum $33
	movff            fw filtwidth
	movff            i $33
@1
	ifltff           $22 i octaves
	cjmpnot          $22 @2
	noise3f          $16 pp
	mulfff           $16 $37 $16
	subfff           $16 $16 $28
	smoothstep       $8 $34 $46 fw
	subfff           $8 $28 $8
	mulfff           $16 $16 $8
	maddfff          sum amp $16
	mulfff           amp amp omega
	movvf            $25 lacunarity
	mulvvv           pp pp $25
	mulfff           fw fw lacunarity
	addfff           i i $28
	jmp              @1
@2
	movff            chaos sum
	movvv            Ct Cs
	mulfff           temp1 radial_dist arg22
	ifltff           $18 temp1 $28
	cond_push        $18
	smoothstep       $8 $33 $28 temp1
	subfff           $8 $28 $8
	msubfff          chaos arg23 $8
	cond_pop
	ifgtff           $18 chaos highland_threshold
	cond_push        $18
	mulfff           $8 chaos highland_altitude
	maddvvf          PQ NN $8
	maddvvf          Ct highland_color chaos
	cond_else
	mulfff           $8 chaos maria_altitude
	maddvvf          PQ NN $8
	mulfff           $8 maria_color chaos
	addfff           $8 maria_basecolor $8
	movvf            $6 $8
	mulvvv           Ct Ct $6
	cond_pop
	subfff           pd $28 v
	xcomp            $15 PP
	divfff           $15 $15 radial_dist
	zcomp            $12 PP
	divfff           $12 $12 radial_dist
	movvf3           vv $15 $33 $12
	movff            lighten $33
	ifltff           $19 pd peak_rad
	cond_push        $19
	divfff           $15 pd peak_rad
	subfff           uu $28 $15
	smoothstep       $15 $33 $28 uu
	mulfff           ht peak_ht $15
	cond_else
	ifltff           $19 pd inner_rad
	cond_push        $19
	movff            ht $33
	cond_else
	ifltff           $19 pd rim_rad
	cond_push        $19
	subfff           $15 pd inner_rad
	subfff           $11 rim_rad inner_rad
	divfff           uu $15 $11
	mulfff           lighten $46 uu
	smoothstep       $15 $33 $28 uu
	mulfff           ht rim_ht $15
	cond_else
	ifltff           $19 pd outer_rad
	cond_push        $19
	subfff           $15 pd rim_rad
	subfff           $11 outer_rad rim_rad
	divfff           $15 $15 $11
	subfff           uu $28 $15
	mulfff           $15 $46 uu
	mulfff           lighten $15 uu
	mulfff           $15 uu uu
	smoothstep       $15 $33 $28 $15
	mulfff           ht rim_ht $15
	cond_else
	movff            ht $33
	cond_pop
	cond_pop
	cond_pop
	cond_pop
	maddvvf          PQ NN ht
	mulfff           lighten lighten $34
	movvf3           $7 lighten lighten lighten
	addvvv           Ct Ct $7
	ifgtff           $19 uu $33
	cond_push        $19
	ifltff           $19 pd peak_rad
	cond_push        $19
	mulvvf           $7 PP $44
	mulvvf           $4 vv $30
	addvvv           vv $7 $4
	area             $15 vv
	sqrt             $15 $15
	maxf             $15 $15 $29
	movff            amp_1 $28
	movvv            pp_1 vv
	movff            sum_1 $33
	movff            fw_1 $15
	movff            i_1 $33
@3
	ifltff           $20 i_1 $31
	cjmpnot          $20 @4
	noise3f          $12 pp_1
	mulfff           $12 $37 $12
	subfff           $12 $12 $28
	smoothstep       $13 $34 $46 fw_1
	subfff           $13 $28 $13
	mulfff           $12 $12 $13
	maddfff          sum_1 amp_1 $12
	mulfff           amp_1 amp_1 $41
	movvf            $3 $37
	mulvvv           pp_1 pp_1 $3
	mulfff           fw_1 fw_1 $37
	addfff           i_1 i_1 $28
	jmp              @3
@4
	movff            ht sum_1
	mulfff           $13 $45 uu
	mulfff           $13 $13 ht
	maddvvf          PQ NN $13
	cond_else
	mulvvf           $24 PP $42
	mulvvf           $2 vv $30
	addvvv           vv $24 $2
	area             $13 vv
	sqrt             $13 $13
	maxf             $13 $13 $29
	movff            amp_2 $28
	movvv            pp_2 vv
	movff            sum_2 $33
	movff            fw_2 $13
	movff            i_2 $33
@5
	ifltff           $21 i_2 $31
	cjmpnot          $21 @6
	noise3f          $10 pp_2
	mulfff           $10 $37 $10
	subfff           $10 $10 $28
	smoothstep       $1 $34 $46 fw_2
	subfff           $1 $28 $1
	mulfff           $10 $10 $1
	maddfff          sum_2 amp_2 $10
	mulfff           amp_2 amp_2 $41
	movvf            $5 $37
	mulvvv           pp_2 pp_2 $5
	mulfff           fw_2 fw_2 $37
	addfff           i_2 i_2 $28
	jmp              @5
@6
	movff            ht sum_2
	ifgtff           $26 radial_dist rim_rad
	cond_push        $26
	mulfff           uu uu uu
	cond_pop
	mulfff           $1 $36 uu
	mulfff           $17 $36 ht
	addfff           $1 $1 $17
	mulfff           $1 $45 $1
	maddvvf          PQ NN $1
	cond_pop
	cond_pop
	movff            lighten $33
	ifgeff           $26 pd rim_rad
	andltff          $26 pd $43
	cond_push        $26
	Duf              $1 u
	mulfff           $1 $1 du
	abs              $1 $1
	Dvf              $17 u
	mulfff           $17 $17 dv
	abs              $17 $17
	addfff           $1 $1 $17
	maxf             fw_3 $1 $29
	mulfff           $1 $40 u
	noise1f          $1 $1
	mulfff           $1 $37 $1
	subfff           $1 $1 $28
	mulfff           $17 $40 fw_3
	smoothstep       $17 $34 $46 $17
	subfff           $17 $28 $17
	mulfff           $1 $1 $17
	smoothstep       lighten $35 $36 $1
	addfff           $1 u $38
	mod              $1 $1 $28
	mulfff           $1 $39 $1
	noise1f          $1 $1
	mulfff           $1 $37 $1
	subfff           $1 $1 $28
	mulfff           $17 $39 u
	smoothstep       $17 $34 $46 $17
	subfff           $17 $28 $17
	mulfff           $1 $1 $17
	mulfff           $1 $34 $1
	addfff           raydist $34 $1
	subfff           $1 raydist $34
	smoothstep       $1 $1 raydist pd
	subfff           $1 $28 $1
	mulfff           lighten lighten $1
	cond_pop
	clampf           $1 lighten $33 $28
	mulfff           lighten $34 $1
	movvf3           $23 lighten lighten lighten
	addvvv           Ct Ct $23
	ambient          $23
	mulvvf           $23 $23 Ka
	normalize        $9 N
	faceforward1     $9 $9 I
	diffuse          $9 $9
	maddvvf          $23 $9 Kd
	mulvvv           Ci Ct $23
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
