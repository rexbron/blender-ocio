# for testing consistency of normals
surface normalshader
param float negate 0
global N Ci Oi Os
temp vector $1
const vector $2 1 1 1
const vector $3 0.5 0.5 0.5
const float $4 0
codesegment
	normalize	$1 N
	jeqff			$4 negate @1
	negvv			$1 $1
@1
	addvvv		$1 $1 $2
	mulvvv		Ci $1 $3
	movvv			Oi Os
	mulvvv		Ci Ci Oi
	return