# QDSLC version 0.0.1-alpha
surface oak
param uniform string shadingspace "shader"
param uniform float ringunevenness 0.5
param uniform float Ka 1
param uniform float truedisp 0
param uniform float ringnoise 0.02
param uniform float ringy 1
param uniform float Kd 1
param uniform color Clightwood 0.5 0.2 0.067
param uniform float grainy 1
param uniform float angularwobblefreq 1.5
param uniform float roughness 0.2
param uniform float Ks 0.25
param uniform float angularwobble 1
param uniform color Cdarkwood 0.15 0.077 0.028
param uniform float ringnoisefreq 1
param uniform float trunkwobblefreq 0.025
param uniform float divotdepth 0.05
param uniform float trunkwobble 0.15
param uniform float ringfreq 8
param uniform float grainfreq 25
param uniform float shadingfreq 1
temp varying float dr
temp varying float fw
temp varying float spacescale
temp varying float g
temp varying float i_1
temp varying normal Nf
temp varying float r2
temp varying point Pshad
temp varying float wood
temp varying float inring
temp varying point pp
temp varying float dPshad
temp uniform float amp
temp varying float amp_1
temp varying float grain1valid
temp varying vector sum
temp uniform float i
temp varying float r
temp varying point Pgrain
temp varying color Cwood
temp varying float grain
temp varying vector offset
temp varying vector Ndisp
temp varying float dPgrain
temp varying point Pring
temp varying float $1
temp varying float $2
temp varying float $3
temp varying float $4
temp varying float $5
temp uniform float $6
temp varying float $7
temp varying float $8
temp uniform vector $9
temp varying vector $10
temp varying vector $11
temp varying vector $12
temp varying vector $13
temp uniform vector $14
temp varying vector $15
temp varying bool $16
temp varying vector $17
temp varying vector $18
temp varying vector $19
temp varying vector $20
const float $21 0.5
const float $22 1
const float $23 1e-06
const float $24 0.1
const float $25 4
const float $26 0.2
const float $27 0
const float $28 0.55
const float $29 0.6
const float $30 0.3
const vector $31 1 1 0.1
const float $32 2
const vector $33 1 1 0
const string $34 "shader"
const vector $35 1 1 0.05
const float $36 0.7
const float $37 0.95
const float $38 0.8
const float $39 0.4
const float $40 5
const float $41 0.75
global Ci Oi I N P dv du Os
codesegment
	ptransform1      $15 shadingspace P
	mulvvf           Pshad $15 shadingfreq
	area             $5 Pshad
	sqrt             $5 $5
	maxf             dPshad $5 $23
	normalize        $15 N
	faceforward1     Nf $15 I
	mulfff           $5 dPshad ringnoisefreq
	mulvvf           $12 Pshad ringnoisefreq
	movff            amp $22
	movvv            pp $12
	movvf            sum $27
	movff            fw $5
	movff            i $27
@1
	jgeff            i $32 @2
	noise3v          $13 pp
	mulvvf           $13 $13 $32
	movvf            $14 $22
	subvvv           $10 $13 $14
	smoothstep       $4 $26 $41 fw
	subfff           $4 $22 $4
	mulvvf           $10 $10 $4
	maddvvf          sum $10 amp
	mulfff           amp amp $21
	mulvvf           pp pp $25
	mulfff           fw fw $25
	addfff           i i $22
	jmp              @1
@2
	movvv            offset sum
	mulvvf           $10 offset ringnoise
	addvvv           Pring Pshad $10
	zcomp            $3 Pshad
	mulfff           $3 $3 trunkwobblefreq
	noise1v          $10 $3
	mulvvf           $10 $10 $32
	movvf            $9 $22
	subvvv           $11 $10 $9
	mulvvf           $11 $11 trunkwobble
	maddvvv          Pring $11 $33
	xcomp            $4 Pring
	mulfff           $1 $4 $4
	ycomp            $2 Pring
	mulfff           $7 $2 $2
	addfff           r2 $1 $7
	sqrt             $2 r2
	mulfff           r $2 ringfreq
	smoothstep       $2 $27 $40 r
	mulfff           $2 angularwobble $2
	mulvvf           $19 Pring angularwobblefreq
	mulvvv           $19 $19 $31
	noise3f          $7 $19
	mulfff           $7 $32 $7
	subfff           $7 $7 $22
	maddfff          r $2 $7
	Duf              $2 r
	mulfff           $2 $2 du
	abs              $2 $2
	Dvf              $7 r
	mulfff           $7 $7 dv
	abs              $7 $7
	addfff           $2 $2 $7
	maxf             dr $2 $23
	noise1f          $2 r
	mulfff           $2 $32 $2
	subfff           $2 $2 $22
	smoothstep       $7 $26 $41 dr
	subfff           $7 $22 $7
	mulfff           $2 $2 $7
	maddfff          r ringunevenness $2
	mod              $2 r $22
	smoothstep       $7 $24 $28 $2
	smoothstep       $8 $36 $37 $2
	subfff           inring $7 $8
	mulvvf           $19 Pshad grainfreq
	mulvvv           Pgrain $19 $35
	area             $7 Pgrain
	sqrt             $7 $7
	maxf             dPgrain $7 $23
	movff            grain $27
	movff            amp_1 $22
	movff            i_1 $27
@3
	jgeff            i_1 $32 @4
	smoothstep       $7 $26 $29 dPgrain
	subfff           grain1valid $22 $7
	ifgtff           $16 grain1valid $27
	cond_push        $16
	noise3f          $7 Pgrain
	mulfff           $7 $32 $7
	subfff           $7 $7 $22
	mulfff           g grain1valid $7
	mulfff           $7 $36 inring
	addfff           $7 $30 $7
	mulfff           g g $7
	subfff           $7 $38 g
	clampf           $7 $7 $27 $22
	pow              g $7 $32
	smoothstep       $7 $21 $22 g
	mulfff           g grainy $7
	ifeqff           $16 i_1 $27
	cond_push        $16
	mulfff           $7 $39 grain1valid
	subfff           $7 $22 $7
	mulfff           inring inring $7
	cond_pop
	maxf             grain grain g
	cond_pop
	mulvvf           Pgrain Pgrain $32
	mulfff           dPgrain dPgrain $32
	movff            amp_1 $21
	addfff           i_1 i_1 $22
	jmp              @3
@4
	mulfff           $7 inring ringy
	mixf             wood $7 $22 grain
	mixv             Cwood Clightwood Cdarkwood wood
	negff            $7 wood
	mulfff           $7 $7 divotdepth
	vtransform1      $20 $34 Nf
	length           spacescale $20
	maxf             $8 spacescale $23
	divfff           $8 $7 $8
	mulvvf           Ndisp Nf $8
	maddvvf          P Ndisp truedisp
	subfff           $6 $22 truedisp
	mulvvf           $20 Ndisp $6
	addvvv           $20 P $20
	calcnormal       $20 $20
	normalize        $20 $20
	faceforward1     Nf $20 I
	mulfff           $8 $21 wood
	subfff           $8 $22 $8
	mulfff           $8 Ks $8
	ambient          $17
	mulvvf           $17 $17 Ka
	diffuse          $18 Nf
	maddvvf          $17 $18 Kd
	mulvvv           $17 Cwood $17
	normalize        $18 I
	negvv            $18 $18
	specular         $18 Nf $18 roughness
	maddvvf          $17 $18 $8
	movvv            Ci $17
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
