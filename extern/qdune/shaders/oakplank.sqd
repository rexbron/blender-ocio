# QDSLC version 0.0.1-alpha
surface oakplank
param uniform string shadingspace "shader"
param uniform float envrad 100
param uniform float ringnoisefreq 1
param uniform float trunkwobblefreq 0.025
param uniform float ringfreq 8
param uniform float varylum 0.5
param uniform float divotdepth 0.012
param uniform float ringy 1
param uniform float raysamples 1
param uniform color Cgroove 0.02 0.02 0.02
param uniform float roughness 0.1
param uniform color Cdarkwood 0.15 0.077 0.028
param uniform float blur 0
param uniform float trunkwobble 0.15
param uniform color Clightwood 0.5 0.2 0.067
param uniform float Ka 1
param uniform float ringnoise 0.02
param uniform float groovedepth 0.03
param uniform float Kd 1
param uniform float planklength 30
param uniform float varyhue 0.015
param uniform float angularwobblefreq 1.5
param uniform float Ks 0.75
param uniform float Kr 1
param uniform string envname ""
param uniform float angularwobble 1
param uniform float plankwidth 2
param uniform float grooveheight 0.05
param uniform float grainfreq 25
param uniform float shadingfreq 1
param uniform float ringunevenness 0.5
param uniform float truedisp 0
param uniform string envspace "world"
param uniform float edgewidth 0.1
param uniform float grainy 1
param uniform float rayjitter 0
param uniform float varnishlump 0.01
param uniform float eta 1.5
param uniform float groovewidth 0.05
param uniform float varysat 0.1
param uniform float varnishlumpfreq 0.5
temp varying float tplank
temp varying float w_1
temp varying float dr
temp varying float height
temp varying float fw
temp varying float inplank
temp varying float g
temp varying float specadjusted
temp varying float l
temp varying float grain
temp varying float s_1
temp varying float i_1
temp varying float swhichplank
temp varying float tt
temp varying float twhichplank
temp varying normal Nf
temp varying float r2
temp varying float x1_1
temp varying point Pshad
temp varying color Cwood
temp varying float nedge_1
temp varying float x1
temp varying float wood
temp varying float x0
temp varying float inring
temp varying float dPgrain
temp varying point pp
temp varying float dPshad
temp varying float dtt
temp varying float newt
temp uniform float amp
temp varying float dss
temp varying float plankindex
temp varying float disp
temp varying float spacescale
temp varying float amp_1
temp varying float grain1valid
temp varying color Chsl
temp varying float edgedisp
temp varying vector sum
temp varying float x0_1
temp varying float splank
temp uniform float i
temp varying float r
temp varying point Pgrain
temp varying float nedge
temp varying float h
temp varying point Ppat
temp varying vector offset
temp varying vector Ndisp
temp varying point Pring
temp varying float ss
temp varying float w
temp varying vector $1
temp uniform vector $2
temp uniform vector $3
temp uniform vector $4
temp varying vector $5
temp varying vector $6
temp varying vector $7
temp varying float $8
temp varying vector $9
temp varying vector $10
temp varying vector $11
temp varying vector $12
temp uniform float $13
temp uniform vector $14
temp varying float $15
temp varying float $16
temp varying float $17
temp varying float $18
temp uniform float $19
temp varying float $20
temp uniform float $21
temp varying float $22
temp varying float $23
temp uniform float $24
temp varying float $25
temp varying float $26
temp varying float $27
temp varying float $28
temp varying float $29
temp varying float $30
temp uniform float $31
temp uniform bool $32
temp varying bool $33
temp uniform vector $34
temp varying vector $35
temp varying vector $36
temp varying vector $37
const float $38 0
const float $39 1
const float $40 1e-06
const float $41 3
const float $42 4
const float $43 5
const float $44 0.5
const float $45 2
const float $46 14
const vector $47 1 5 10
const string $48 "hsl"
const float $49 0.95
const float $50 0.7
const vector $51 1 1 0.05
const float $52 0.75
const float $53 37
const float $54 0.01
const float $55 0.4
const float $56 0.3
const float $57 0.6
const float $58 0.55
const float $59 13
const vector $60 1 1 0
const string $61 "shader"
const vector $62 1 1 0.1
const float $63 0.2
const float $64 0.1
const float $65 0.8
const string $66 "rgb"
global Ci Oi I N P dv du Os
codesegment
	ptransform1      $6 shadingspace P
	mulvvf           Pshad $6 shadingfreq
	area             $22 Pshad
	sqrt             $22 $22
	maxf             dPshad $22 $40
	xcomp            ss Pshad
	ycomp            tt Pshad
	zcomp            height Pshad
	Duf              $22 ss
	mulfff           $22 $22 du
	abs              $22 $22
	Dvf              $8 ss
	mulfff           $8 $8 dv
	abs              $8 $8
	addfff           $22 $22 $8
	maxf             dss $22 $40
	Duf              $22 tt
	mulfff           $22 $22 du
	abs              $22 $22
	Dvf              $8 tt
	mulfff           $8 $8 dv
	abs              $8 $8
	addfff           $22 $22 $8
	maxf             dtt $22 $40
	divfff           $22 ss plankwidth
	floor            swhichplank $22
	mulfff           $22 swhichplank plankwidth
	subfff           splank ss $22
	cellnoise1f      $22 swhichplank
	mulfff           $22 planklength $22
	addfff           newt tt $22
	divfff           $22 newt planklength
	floor            twhichplank $22
	mulfff           $22 twhichplank planklength
	subfff           tplank newt $22
	divfff           $19 groovewidth $45
	addfff           $22 ss $19
	divfff           w dss plankwidth
	divfff           $8 $22 plankwidth
	divfff           $20 w $45
	subfff           x0 $8 $20
	addfff           x1 x0 w
	divfff           nedge groovewidth plankwidth
	subfff           $8 $39 nedge
	floor            $20 x1
	mulfff           $8 $8 $20
	floor            $20 x1
	subfff           $20 x1 $20
	subfff           $20 $20 nedge
	maxf             $20 $38 $20
	addfff           $8 $8 $20
	subfff           $20 $39 nedge
	floor            $17 x0
	mulfff           $20 $20 $17
	floor            $17 x0
	subfff           $17 x0 $17
	subfff           $17 $17 nedge
	maxf             $17 $38 $17
	addfff           $20 $20 $17
	subfff           $8 $8 $20
	divfff           $8 $8 w
	divfff           $21 grooveheight $45
	addfff           $20 newt $21
	divfff           w_1 dtt planklength
	divfff           $17 $20 planklength
	divfff           $18 w_1 $45
	subfff           x0_1 $17 $18
	addfff           x1_1 x0_1 w_1
	divfff           nedge_1 grooveheight planklength
	subfff           $17 $39 nedge_1
	floor            $18 x1_1
	mulfff           $17 $17 $18
	floor            $18 x1_1
	subfff           $18 x1_1 $18
	subfff           $18 $18 nedge_1
	maxf             $18 $38 $18
	addfff           $17 $17 $18
	subfff           $18 $39 nedge_1
	floor            $15 x0_1
	mulfff           $18 $18 $15
	floor            $15 x0_1
	subfff           $15 x0_1 $15
	subfff           $15 $15 nedge_1
	maxf             $15 $38 $15
	addfff           $18 $18 $15
	subfff           $17 $17 $18
	divfff           $17 $17 w_1
	mulfff           inplank $8 $17
	mulfff           $20 $59 twhichplank
	addfff           plankindex swhichplank $20
	subfff           $20 splank $44
	mulfff           $17 $54 tplank
	subfff           $17 height $17
	movvf3           $5 $20 $17 tplank
	cellnoise2v      $36 swhichplank twhichplank
	movvf            $2 $44
	subvvv           $37 $36 $2
	mulvvv           $37 $47 $37
	addvvv           Ppat $5 $37
	mulfff           $17 dPshad ringnoisefreq
	mulvvf           $37 Ppat ringnoisefreq
	movff            amp $39
	movvv            pp $37
	movvf            sum $38
	movff            fw $17
	movff            i $38
@1
	ifltff           $32 i $45
	cjmpnot          $32 @2
	noise3v          $1 pp
	mulvvf           $1 $1 $45
	movvf            $4 $39
	subvvv           $35 $1 $4
	smoothstep       $29 $63 $52 fw
	subfff           $29 $39 $29
	mulvvf           $35 $35 $29
	maddvvf          sum $35 amp
	mulfff           amp amp $44
	mulvvf           pp pp $42
	mulfff           fw fw $42
	addfff           i i $39
	jmp              @1
@2
	movvv            offset sum
	mulvvf           $35 offset ringnoise
	addvvv           Pring Ppat $35
	zcomp            $16 Ppat
	mulfff           $16 $16 trunkwobblefreq
	noise1v          $35 $16
	mulvvf           $35 $35 $45
	movvf            $3 $39
	subvvv           $11 $35 $3
	mulvvf           $11 $11 trunkwobble
	maddvvv          Pring $11 $60
	xcomp            $29 Pring
	mulfff           $30 $29 $29
	ycomp            $27 Pring
	mulfff           $28 $27 $27
	addfff           r2 $30 $28
	sqrt             $27 r2
	mulfff           r $27 ringfreq
	smoothstep       $27 $38 $43 r
	mulfff           $27 angularwobble $27
	mulvvf           $10 Pring angularwobblefreq
	mulvvv           $10 $10 $62
	noise3f          $28 $10
	mulfff           $28 $45 $28
	subfff           $28 $28 $39
	maddfff          r $27 $28
	Duf              $27 r
	mulfff           $27 $27 du
	abs              $27 $27
	Dvf              $28 r
	mulfff           $28 $28 dv
	abs              $28 $28
	addfff           $27 $27 $28
	maxf             dr $27 $40
	noise1f          $27 r
	mulfff           $27 $45 $27
	subfff           $27 $27 $39
	smoothstep       $28 $63 $52 dr
	subfff           $28 $39 $28
	mulfff           $27 $27 $28
	maddfff          r ringunevenness $27
	mod              $27 r $39
	smoothstep       $28 $64 $58 $27
	smoothstep       $25 $50 $49 $27
	subfff           inring $28 $25
	mulvvf           $10 Ppat grainfreq
	mulvvv           Pgrain $10 $51
	area             $28 Pgrain
	sqrt             $28 $28
	maxf             dPgrain $28 $40
	movff            grain $38
	movff            amp_1 $39
	movff            i_1 $38
@3
	ifltff           $33 i_1 $45
	cjmpnot          $33 @4
	cond_push        $33
	smoothstep       $28 $63 $57 dPgrain
	subfff           grain1valid $39 $28
	ifgtff           $33 grain1valid $38
	cond_push        $33
	noise3f          $28 Pgrain
	mulfff           $28 $45 $28
	subfff           $28 $28 $39
	mulfff           g grain1valid $28
	mulfff           $28 $50 inring
	addfff           $28 $56 $28
	mulfff           g g $28
	subfff           $28 $65 g
	clampf           $28 $28 $38 $39
	pow              g $28 $45
	smoothstep       $28 $44 $39 g
	mulfff           g grainy $28
	ifeqff           $33 i_1 $38
	cond_push        $33
	mulfff           $28 $55 grain1valid
	subfff           $28 $39 $28
	mulfff           inring inring $28
	cond_pop
	maxf             grain grain g
	cond_pop
	mulvvf           Pgrain Pgrain $45
	mulfff           dPgrain dPgrain $45
	mulfff           amp_1 amp_1 $44
	cond_pop
	addfff           i_1 i_1 $39
	jmp              @3
@4
	mulfff           $28 inring ringy
	mixf             wood $28 $39 grain
	mixv             Cwood Clightwood Cdarkwood wood
	ctransform1      Chsl $48 Cwood
	compv            h Chsl $38
	compv            s_1 Chsl $39
	compv            l Chsl $45
	addfff           $28 plankindex $41
	cellnoise1f      $28 $28
	subfff           $28 $28 $44
	maddfff          h varyhue $28
	subfff           $28 plankindex $46
	cellnoise1f      $28 $28
	subfff           $28 $28 $44
	mulfff           $28 varysat $28
	subfff           $28 $39 $28
	mulfff           s_1 s_1 $28
	addfff           $28 plankindex $53
	cellnoise1f      $28 $28
	subfff           $28 $28 $44
	mulfff           $28 varylum $28
	subfff           $28 $39 $28
	mulfff           l l $28
	mod              $28 h $39
	clampf           $25 s_1 $38 $39
	clampf           $26 l $38 $39
	movvf3           Chsl $28 $25 $26
	movvf            $14 $39
	movvf            $34 $38
	clampv           $10 Chsl $34 $14
	ctransform2      Cwood $48 $66 $10
	mixv             Cwood Cgroove Cwood inplank
	subfff           $31 plankwidth edgewidth
	smoothstep       $25 $38 edgewidth splank
	smoothstep       $26 $31 plankwidth splank
	subfff           edgedisp $25 $26
	subfff           $24 planklength edgewidth
	smoothstep       $26 $38 edgewidth tplank
	smoothstep       $23 $24 planklength tplank
	subfff           $26 $26 $23
	mulfff           edgedisp edgedisp $26
	normalize        $9 N
	faceforward1     Nf $9 I
	negff            $26 wood
	mulfff           $26 $26 divotdepth
	subfff           $23 edgedisp $39
	mulfff           $23 groovedepth $23
	addfff           disp $26 $23
	mulvvf           $9 Pshad varnishlumpfreq
	noise3f          $26 $9
	mulfff           $26 $45 $26
	subfff           $26 $26 $39
	mulfff           $23 dPshad varnishlumpfreq
	smoothstep       $23 $63 $52 $23
	subfff           $23 $39 $23
	mulfff           $26 $26 $23
	maddfff          disp varnishlump $26
	vtransform1      $9 $61 Nf
	length           spacescale $9
	maxf             $26 spacescale $40
	divfff           $26 disp $26
	mulvvf           Ndisp Nf $26
	maddvvf          P Ndisp truedisp
	subfff           $13 $39 truedisp
	mulvvf           $9 Ndisp $13
	addvvv           $9 P $9
	calcnormal       $9 $9
	normalize        $9 $9
	faceforward1     Nf $9 I
	mulfff           $26 $56 wood
	addfff           $26 $39 $26
	subfff           $23 $39 inplank
	mulfff           $23 $65 $23
	subfff           specadjusted $26 $23
	mulfff           $26 specadjusted Ks
	ambient          $7
	mulvvf           $7 $7 Ka
	diffuse          $12 Nf
	maddvvf          $7 $12 Kd
	mulvvv           $7 Cwood $7
	normalize        $12 I
	negvv            $12 $12
	specular         $12 Nf $12 roughness
	maddvvf          $7 $12 $26
	movvv            Ci $7
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
