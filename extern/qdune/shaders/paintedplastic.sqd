# Original source:
# surface paintedplastic( float Ka = 1, Kd = 0.5, Ks = 0.5, roughness = 0.1;
#                        color specularcolor = 1;
#                        string texturename = ""; )
# {
#   color Ct = Cs;
#   if (texturename != "")
#     Ct *= color texture(texturename);
#   normal Nf = faceforward(normalize(N), I);
#   vector V = -normalize(I);
#   Ci = Ct*(Ka*ambient() + Kd*diffuse(Nf)) + specularcolor*Ks*specular(Nf, V, roughness);
#   Oi = Os;
#   Ci *= Oi;
# }
surface paintedplastic
param uniform float Ka 1
param uniform float Kd 0.5
param uniform float Ks 0.5
param uniform float roughness 0.1
param uniform color specularcolor 1 1 1
param string texturename ""
global N I Ci Cs Oi Os s t
temp color Ct
temp normal Nf
temp vector V
temp vector $1
temp vector $2
const string $3 ""
temp float $4
const float $5 1
codesegment
	movvv         Ct Cs
	jeqss         texturename $3 @1
	texturev      $1 texturename
	mulvvv        Ct Ct $1
@1
	normalize     $1 N
	faceforward1  Nf $1 I
	normalize     V I
	negvv         V V
	diffuse       $1 Nf
	mulvvf        $1 $1 Kd
	ambient       $2
	maddvvf       $1 $2 Ka
	mulvvv        $1 $1 Ct
	specular      $2 Nf V roughness
	mulvvf        $2 $2 Ks
	mulvvv        $2 $2 specularcolor
	addvvv        Ci $1 $2
	movvv         Oi Os
	mulvvv        Ci Ci Oi
	return
