# QDSLC version 0.0.1-alpha
surface planetclouds
param uniform float Ka 0.5
param uniform float octaves 9
param uniform float Kd 0.75
param uniform float distortionscale 1
param uniform float offset 0
param uniform float omega 0.7
param uniform float lambda 2
temp varying vector Pdistortion
temp uniform float i
temp varying point PP
temp varying float result
temp varying float sum
temp varying float fw
temp uniform float amp
temp varying float filtwidth
temp varying point pp
temp varying float $1
temp varying float $2
temp uniform float $3
temp varying float $4
temp uniform vector $5
temp varying vector $6
temp uniform bool $7
temp varying vector $8
temp varying vector $9
temp varying vector $10
const float $11 0.75
const float $12 1
const float $13 1e-06
const string $14 "shader"
const float $15 0.2
const float $16 2
const float $17 0
global Ci Oi I N P Os
codesegment
	ptransform1      PP $14 P
	area             $4 PP
	sqrt             $4 $4
	maxf             filtwidth $4 $13
	noise3v          $10 PP
	mulvvf           $10 $10 $16
	movvf            $5 $12
	subvvv           $8 $10 $5
	smoothstep       $2 $15 $11 filtwidth
	subfff           $2 $12 $2
	mulvvf           $8 $8 $2
	mulvvf           Pdistortion $8 distortionscale
	addvvv           PP PP Pdistortion
	area             $1 PP
	sqrt             $1 $1
	maxf             filtwidth $1 $13
	movff            amp $12
	movvv            pp PP
	movff            sum $17
	movff            fw filtwidth
	movff            i $17
@1
	ifltff           $7 i octaves
	cjmpnot          $7 @2
	noise3f          $1 pp
	mulfff           $1 $16 $1
	subfff           $1 $1 $12
	smoothstep       $2 $15 $11 fw
	subfff           $2 $12 $2
	mulfff           $1 $1 $2
	maddfff          sum amp $1
	mulfff           amp amp omega
	movvf            $5 lambda
	mulvvv           pp pp $5
	mulfff           fw fw lambda
	addfff           i i $12
	jmp              @1
@2
	movff            result sum
	addfff           $2 result offset
	clampf           result $2 $17 $12
	addfff           $3 $12 offset
	divfff           result result $3
	mulvvf           Oi Os result
	ambient          $9
	mulvvf           $9 $9 Ka
	normalize        $6 N
	faceforward1     $6 $6 I
	diffuse          $6 $6
	maddvvf          $9 $6 Kd
	mulvvv           Ci Oi $9
	return
