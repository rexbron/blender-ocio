# original source:
#light pointlight ( float intensity = 1;
#                   color lightcolor = 1;
#                   point from = point "shader" (0,0,0); )
#{
#  illuminate (from)
#    Cl = intensity * lightcolor / (L . L);
#}
light pointlight
param uniform float intensity 1
param uniform color lightcolor 1 1 1
param uniform point from 0 0 0
temp float $1
const string $2 "shader"
global L Cl
codesegment @1
	ptocurr     from $2 from
@1
	illuminate1 from
	vdot        $1 L L
	divvvf      Cl lightcolor $1
	mulvvf      Cl Cl intensity
	end_illuminate
	return
