# QDSLC version 0.0.1-alpha
surface screen
param uniform float Ka 1
param uniform float density 0.25
param uniform float Kd 0.75
param uniform float roughness 0.1
param uniform float Ks 0.4
param uniform color specularcolor 1 1 1
param uniform float frequency 20
temp varying normal Nf
temp varying float $1
temp varying float $2
temp varying vector $3
temp varying bool $4
temp varying vector $5
temp varying vector $6
temp uniform vector $7
const float $8 0
const float $9 1
global Ci Oi I N s t Cs Os
codesegment
	mulfff           $2 s frequency
	mod              $2 $2 $9
	ifltff           $4 $2 density
	mulfff           $1 t frequency
	mod              $1 $1 $9
	orltff           $4 $1 density
	cond_push        $4
	movvf            Oi $9
	normalize        $5 N
	faceforward1     Nf $5 I
	ambient          $5
	mulvvf           $5 $5 Ka
	diffuse          $6 Nf
	maddvvf          $5 $6 Kd
	mulvvv           $5 Cs $5
	mulvvf           $7 specularcolor Ks
	normalize        $3 I
	negvv            $3 $3
	specular         $3 Nf $3 roughness
	mulvvv           $6 $7 $3
	addvvv           $5 $5 $6
	mulvvv           Ci Os $5
	cond_else
	movvf            Oi $8
	movvf            Ci $8
	return
