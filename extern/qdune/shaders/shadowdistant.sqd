light shadowdistant
param uniform float intensity 1
param uniform color lightcolor 1 1 1
param uniform point from 0 0 0
param uniform point to 0 0 1
param string shadowname ""
param uniform float blur 1
param uniform float samples 16
param uniform float bias 3
temp vector $1
const float $2 0
const string $3 "shader"
const string $4 ""
temp float $5
const string $6 "samples"
const string $7 "blur"
const string $8 "bias"
global Cl Ps
codesegment @1
	ptocurr		from $3 from
	ptocurr		to $3 to
@1
	subvvv		$1 to from
	solar2		$1 $2
	mulvvf		Cl lightcolor intensity
	jeqss			shadowname $4 @2
	shadow		$5 shadowname Ps $6 samples $7 blur $8 bias
	subfff		$5 1 $5
	mulvvf		Cl Cl $5
@2
	end_solar
	return