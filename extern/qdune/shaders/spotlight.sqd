# QDSLC version 0.0.1-alpha
light spotlight
param uniform color lightcolor 1 1 1
param uniform point from 0.0 0.0 0.0
param uniform float conedeltaangle 0.0872664625997
param uniform float coneangle 0.523598775598
param uniform point to 0.0 0.0 0.0
param uniform float intensity 1
param uniform float beamdistribution 2
temp uniform vector A
temp uniform float cosoutside
temp uniform float cosinside
temp varying float cosangle
temp varying float atten
temp uniform float $1
temp varying float $2
temp varying float $3
temp uniform vector $4
const vector $5 0 0 1
const string $6 "shader"
const vector $7 0 0 0
global L Cl
codesegment @1
	ptocurr          from $6 $7
	ptocurr          to $6 $5
@1
	subvvv           $4 to from
	normalize        A $4
	cos              cosoutside coneangle
	subfff           $1 coneangle conedeltaangle
	cos              cosinside $1
	illuminate2      from A coneangle
	vdot             $2 L A
	length           $3 L
	divfff           cosangle $2 $3
	pow              $2 cosangle beamdistribution
	vdot             $3 L L
	divfff           atten $2 $3
	smoothstep       $2 cosoutside cosinside cosangle
	mulfff           atten atten $2
	mulfff           $2 atten intensity
	mulvvf           Cl lightcolor $2
	end_illuminate
	return
