# QDSLC version 0.0.1-alpha
surface terran
param uniform float mottle_limit 0.75
param uniform float multifractal 0
param uniform float octaves 7
param uniform float dist_scale 0.2
param uniform float sea_level 0
param uniform float lacunarity 2
param uniform float lat_scale 0.95
param uniform float mottle_dim 0.25
param uniform float nonlinear 0
param uniform float purt_scale 0.9
param uniform float depth_max 0.5
param uniform float Ka 0.5
param uniform float mottle_mag 0.02
param uniform float Kd 0.7
param uniform float ice_caps 0.9
param uniform float mottle_scale 20
param uniform float offset 0
param uniform float map_exp 0
param uniform float spectral_exp 0.5
param uniform float bump_scale 0.07
param uniform float mtn_scale 1
param uniform float depth_scale 1
temp uniform float i_2
temp varying float fw
temp varying color Ct
temp varying float filtwidth
temp varying float fw_2
temp varying float fw_1
temp varying float latitude
temp uniform float i_1
temp varying float bumpy
temp varying float sum
temp varying float chaos
temp varying point tp
temp varying float b
temp varying point pp
temp varying point PP
temp varying float sum_1
temp uniform float amp
temp varying float weight
temp varying point pp_1
temp varying point P2
temp uniform float amp_1
temp varying float purt
temp uniform float i
temp varying vector PtN
temp varying point Ptexture
temp varying float o
temp uniform bool $1
temp varying bool $2
temp uniform float $3
temp uniform vector $4
temp varying vector $5
temp uniform vector $6
temp uniform vector $7
temp varying vector $8
temp uniform vector $9
temp varying vector $10
temp varying vector $11
temp varying float $12
temp varying float $13
temp varying float $14
temp varying float $15
temp varying float $16
temp varying float $17
temp uniform bool $18
temp uniform bool $19
temp varying bool $20
temp uniform bool $21
temp varying bool $22
temp varying vector $23
temp varying vector $24
temp varying vector $25
temp varying bool $26
const float $27 0
const float $28 1
const float $29 1e-06
const float $30 0.75
const vector $31 0.085 0.2 0.04
const vector $32 0.5 0.39 0.2
const vector $33 1 1 1
const vector $34 0.065 0.22 0.04
const vector $35 0.1 0.2 0.5
const vector $36 0.5 0.42 0.28
const float $37 0.7
const vector $38 0.6 0.5 0.23
const vector $39 1 1 1
const float $40 6
const float $41 0.0001
const vector $42 0.2 0.3 0
const float $43 1.5
const float $44 2
const float $45 0.6
const vector $46 0.5 0.39 0.2
const vector $47 1 1 1
const string $48 "shader"
const float $49 0.2
const vector $50 0.5 0.39 0.2
const vector $51 0.5 0.175 0.5
global Ci Oi I N P Os
codesegment
	ptransform1      Ptexture $48 P
	area             $17 Ptexture
	sqrt             $17 $17
	maxf             filtwidth $17 $29
	normalize        PtN Ptexture
	jneff            multifractal $27 @1
	movff            amp $28
	movvv            pp Ptexture
	movff            sum $27
	movff            fw_1 filtwidth
	movff            i_1 $27
@3
	ifltff           $18 i_1 octaves
	cjmpnot          $18 @4
	noise3f          $17 pp
	mulfff           $17 $44 $17
	subfff           $17 $17 $28
	smoothstep       $16 $49 $30 fw_1
	subfff           $16 $28 $16
	mulfff           $17 $17 $16
	maddfff          sum amp $17
	mulfff           amp amp spectral_exp
	movvf            $7 lacunarity
	mulvvv           pp pp $7
	mulfff           fw_1 fw_1 lacunarity
	addfff           i_1 i_1 $28
	jmp              @3
@4
	movff            bumpy sum
	jmp              @2
@1
	noise3v          $25 Ptexture
	mulvvf           $25 $25 $44
	movvf            $9 $28
	subvvv           $8 $25 $9
	smoothstep       $14 $49 $30 filtwidth
	subfff           $14 $28 $14
	mulvvf           $8 $8 $14
	maddvvf          Ptexture $8 dist_scale
	movff            o spectral_exp
	movvv            tp Ptexture
	movff            fw filtwidth
	noise3v          $8 tp
	mulvvf           $8 $8 $44
	movvf            $4 $28
	subvvv           $5 $8 $4
	smoothstep       $15 $49 $30 fw
	subfff           $15 $28 $15
	mulvvf           $5 $5 $15
	mulvvf           $5 $5 $43
	addvvv           $5 $5 tp
	noise3f          $14 $5
	mulfff           $14 $44 $14
	subfff           $14 $14 $28
	smoothstep       $15 $49 $30 fw
	subfff           $15 $28 $15
	mulfff           $14 $14 $15
	abs              weight $14
	noise3f          $14 tp
	mulfff           $14 $44 $14
	subfff           $14 $14 $28
	smoothstep       $15 $49 $30 fw
	subfff           $15 $28 $15
	mulfff           $14 $14 $15
	mulfff           bumpy weight $14
	movff            i $28
@5
	ifltff           $19 i octaves
	ifgeff           $2 weight $41
	andltff          $2 fw $28
	and              $20 $19 $2
	cjmpnot          $20 @6
	cond_push        $20
	movvf            $4 lacunarity
	mulvvv           tp tp $4
	mulfff           fw fw filtwidth
	noise3f          $15 tp
	mulfff           $15 $44 $15
	subfff           $15 $15 $28
	addfff           $15 $37 $15
	mulfff           $15 o $15
	mulfff           weight weight $15
	abs              $15 weight
	clampf           weight $15 $27 $28
	noise3f          $15 tp
	mulfff           $15 $44 $15
	subfff           $15 $15 $28
	minf             $12 weight spectral_exp
	maddfff          bumpy $15 $12
	mulfff           o o spectral_exp
	cond_pop
	addfff           i i $28
	jmp              @5
@6
@2
	zcomp            $15 PtN
	abs              latitude $15
	addfff           chaos bumpy offset
	ifgtff           $2 chaos sea_level
	cond_push        $2
	mulfff           $15 bump_scale bumpy
	smoothstep       $12 $45 $28 latitude
	subfff           $12 $28 $12
	mulfff           b $15 $12
	mulfff           chaos chaos mtn_scale
	normalize        $24 N
	mulvvf           $24 $24 b
	addvvv           P2 P $24
	cond_else
	movvv            P2 P
	cond_pop
	calcnormal       N P2
	subfff           $15 $28 latitude
	mulfff           $15 nonlinear $15
	addfff           $15 $15 purt_scale
	maddfff          latitude chaos $15
	jleff            map_exp $27 @7
	pow              $15 latitude map_exp
	mulfff           latitude lat_scale $15
	jmp              @8
@7
	mulfff           latitude latitude lat_scale
@8
	ifgtff           $2 chaos sea_level
	cond_push        $2
	spline1v         Ct latitude $32 $46 $50 $42 $31 $34 $36 $38 $47 $33
	ifltff           $2 latitude mottle_limit
	cond_push        $2
	mulvvf           PP Ptexture mottle_scale
	mulfff           $15 mottle_scale filtwidth
	movff            amp_1 $28
	movvv            pp_1 PP
	movff            sum_1 $27
	movff            fw_2 $15
	movff            i_2 $27
@9
	ifltff           $21 i_2 $40
	cjmpnot          $21 @10
	noise3f          $12 pp_1
	mulfff           $12 $44 $12
	subfff           $12 $12 $28
	smoothstep       $13 $49 $30 fw_2
	subfff           $13 $28 $13
	mulfff           $12 $12 $13
	maddfff          sum_1 amp_1 $12
	mulfff           amp_1 amp_1 mottle_dim
	movvf            $6 $44
	mulvvv           pp_1 pp_1 $6
	mulfff           fw_2 fw_2 $44
	addfff           i_2 i_2 $28
	jmp              @9
@10
	movff            purt sum_1
	mulfff           $13 mottle_mag purt
	maddvvf          Ct $51 $13
	cond_pop
	cond_else
	movvv            Ct $35
	ifgtff           $1 ice_caps $27
	ifgtff           $22 latitude ice_caps
	and              $26 $1 $22
	cond_push        $26
	movvv            Ct $39
	cond_else
	subfff           chaos chaos sea_level
	mulfff           chaos chaos depth_scale
	negff            $3 depth_max
	maxf             chaos chaos $3
	addfff           $13 $28 chaos
	movvf            $23 $13
	mulvvv           Ct Ct $23
	cond_pop
	cond_pop
	ambient          $10
	mulvvf           $10 $10 Ka
	normalize        $11 N
	faceforward1     $11 $11 I
	diffuse          $11 $11
	maddvvf          $10 $11 Kd
	mulvvv           Ci Ct $10
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
