# QDSLC version 0.0.1-alpha
surface veinedmarble
param uniform float warping 0.5
param uniform float Ka 0.5
param uniform float Kd 0.8
param uniform float veinfreq 1
param uniform float sharpness 8
param uniform color veincolor 0.6 0.5 0.1
param uniform float roughness 0.075
param uniform float Ks 0.4
param uniform color specularcolor 1 1 1
param uniform float veinlevels 2
param uniform float warpfreq 1
temp varying float i
temp varying point pp
temp varying float freq
temp varying float turbsum
temp varying float fw
temp uniform float amp
temp varying point offset
temp varying normal Nf
temp varying point PP
temp varying color Ct
temp varying float dPP
temp uniform float i_1
temp varying vector sum
temp varying float turb
temp varying float $1
temp varying float $2
temp varying float $3
temp varying vector $4
temp varying vector $5
temp varying vector $6
temp uniform vector $7
const float $8 0.5
const float $9 1
const float $10 1e-06
const float $11 3
const string $12 "shader"
const float $13 6
const float $14 0.2
const float $15 0.8
const float $16 2
const float $17 0.75
const float $18 0
global Ci Oi I N P Cs Os
codesegment
	ptransform1      PP $12 P
	area             $3 PP
	sqrt             $3 $3
	maxf             dPP $3 $10
	movff            amp $9
	movvv            pp PP
	movvf            sum $18
	movff            fw dPP
	movff            i_1 $18
@1
	jgeff            i_1 $13 @2
	noise3v          $6 pp
	mulvvf           $6 $6 $16
	movvf            $7 $9
	subvvv           $4 $6 $7
	smoothstep       $2 $14 $17 fw
	subfff           $2 $9 $2
	mulvvf           $4 $4 $2
	maddvvf          sum $4 amp
	mulfff           amp amp $8
	mulvvf           pp pp $16
	mulfff           fw fw $16
	addfff           i_1 i_1 $9
	jmp              @1
@2
	movvv            $4 sum
	maddvvf          PP $4 $8
	movff            turbsum $18
	movff            freq $9
	mulvvf           PP PP veinfreq
	movff            i $18
@3
	jgeff            i veinlevels @4
	mulvvf           $4 PP freq
	noise3f          $1 $4
	mulfff           $1 $16 $1
	subfff           $1 $1 $9
	mulfff           $2 dPP freq
	smoothstep       $2 $14 $17 $2
	subfff           $2 $9 $2
	mulfff           $1 $1 $2
	abs              turb $1
	subfff           $1 $9 turb
	smoothstep       $1 $15 $9 $1
	pow              $1 $1 sharpness
	divfff           turb $1 freq
	subfff           $1 $9 turbsum
	maddfff          turbsum $1 turb
	mulfff           freq freq $11
	mulvvf           PP PP $11
	addfff           i i $9
	jmp              @3
@4
	mixv             Ct Cs veincolor turbsum
	normalize        $4 N
	faceforward1     Nf $4 I
	ambient          $4
	mulvvf           $4 $4 Ka
	diffuse          $5 Nf
	maddvvf          $4 $5 Kd
	mulvvv           $4 Ct $4
	normalize        $5 I
	negvv            $5 $5
	specular         $5 Nf $5 roughness
	maddvvf          $4 $5 Ks
	movvv            Ci $4
	movvv            Oi Os
	mulvvv           Ci Ci Oi
	return
